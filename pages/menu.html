<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card√°pio - Mr.Jaba</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <a href="../index.html" class="logo">
                <img src="../images/logo/logo.png" alt="Mr.Jaba Logo" class="logo-img">
            </a>
            <button class="menu-toggle" id="menuToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu" id="navMenu">
                <li><a href="menu.html" class="active">Card√°pio</a></li>
                <li><a href="about.html">Sobre</a></li>
                <li><a href="login.html" id="loginBtn">Entrar</a></li>
            </ul>
            <a href="cart.html" class="navbar-cart">
                üõí <span class="cart-count" id="cartCount">0</span>
            </a>
        </nav>
    </header>

    <main class="menu-page">
        <div class="menu-header">
            <h1>Card√°pio</h1>
            <div class="category-filter">
                <button class="filter-btn active" data-category="all">Todos</button>
                <button class="filter-btn" data-category="burger_180g">Burger 180g</button>
                <button class="filter-btn" data-category="burger_90g">Burger 90g</button>
                <button class="filter-btn" data-category="dogs">Dogs</button>
                <button class="filter-btn" data-category="porcoes">Por√ß√µes</button>
                <button class="filter-btn" data-category="molhos">Molhos</button>
                <button class="filter-btn" data-category="doces">Doces</button>
                <button class="filter-btn" data-category="agua_suco">√Ågua/Suco</button>
                <button class="filter-btn" data-category="refrigerante">Refrigerante</button>
                <button class="filter-btn" data-category="cerveja">Cerveja</button>
                <button class="filter-btn" data-category="chopp">Chopp</button>
            </div>
        </div>

        <div id="productsContainer" class="products-container"></div>
    </main>

    <!-- Modal de Produto -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="app.closeProductModal()">&times;</span>
            <div class="modal-body">
                <div id="modalProductImage" class="modal-image"></div>
                <h2 id="modalProductName"></h2>
                <p id="modalProductDescription"></p>
                <p id="modalProductPrice" style="font-size: 1.5em; color: #ff7401; font-weight: bold;"></p>
                
                <div class="modal-form">
                    <div class="form-group">
                        <label>Quantidade:</label>
                        <div class="quantity-control">
                            <button onclick="document.getElementById('productQuantity').value = Math.max(1, parseInt(document.getElementById('productQuantity').value) - 1)">-</button>
                            <input type="number" id="productQuantity" value="1" min="1">
                            <button onclick="document.getElementById('productQuantity').value = parseInt(document.getElementById('productQuantity').value) + 1">+</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Observa√ß√µes (opcional):</label>
                        <textarea id="productNotes" placeholder="Ex: Sem cebola, com bastante molho..."></textarea>
                    </div>
                    <input type="hidden" id="currentProductId">
                    <button class="btn-primary" onclick="app.addToCart()">Adicionar ao Carrinho</button>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2024 Mr.Jaba - Todos os direitos reservados</p>
    </footer>

    <script src="../js/data.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/cart.js"></script>
    <script src="../js/app.js"></script>
    <script>
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                const category = this.dataset.category;
                const container = document.getElementById('productsContainer');
                const filtered = category === 'all' ? products : products.filter(p => p.category === category);
                container.innerHTML = filtered.map(product => `
                    <div class="product-card">
                        <div class="product-image"><img src="images/products/${product.image}" alt="${product.name}" onerror="this.style.display='none'; this.parentElement.innerHTML += '<span class=emoji>${product.emoji}</span>'"><span class="price">R$ ${product.price.toFixed(2)}</span></div>
                        <h3>${product.name}</h3>
                        <p class="description">${product.description}</p>
                        <div class="product-footer"><span class="rating">‚≠ê ${product.rating}</span><button class="btn-add" onclick="app.openProductModal(${product.id})">Adicionar</button></div>
                    </div>
                `).join('');
            });
        });
        setInterval(() => { document.getElementById('cartCount').textContent = cart.getItemCount(); }, 1000);
    </script>
</body>
</html>
